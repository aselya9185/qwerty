!function(e){function t(t){for(var s,r,i=t[0],l=t[1],d=t[2],u=0,p=[];u<i.length;u++)r=i[u],a[r]&&p.push(a[r][0]),a[r]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(e[s]=l[s]);for(c&&c(t);p.length;)p.shift()();return n.push.apply(n,d||[]),o()}function o(){for(var e,t=0;t<n.length;t++){for(var o=n[t],s=!0,i=1;i<o.length;i++){var l=o[i];0!==a[l]&&(s=!1)}s&&(n.splice(t--,1),e=r(r.s=o[0]))}return e}var s={},a={"web/addresses":0},n=[];function r(t){if(s[t])return s[t].exports;var o=s[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=s,r.d=function(e,t,o){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)r.d(o,s,function(t){return e[t]}.bind(null,s));return o},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/js/cmodules/";var i=window.webpackJsonp=window.webpackJsonp||[],l=i.push.bind(i);i.push=t,i=i.slice();for(var d=0;d<i.length;d++)t(i[d]);var c=l;n.push([72,"bundles/common"]),o()}({72:function(e,t,o){e.exports=o("qeT8")},qeT8:function(e,t,o){"use strict";o.r(t);o("91GP");var s=o("zxIV"),a=o("t7n3"),n=window,r=n.val,i=n.getLang,l=function(){var e={},t={},o={},n={},d={},c=null,u=null,p=null,m=14;function g(e){return window.ymaps.templateLayoutFactory.createClass(`<div class="circle_layout" style="background-image: url('${e}')"></div>`)}function f(e){var t="";e&&(t=" address_layout_content_cluster");var o=`\n    <div class="address_layout">\n      <span class="feature_intro_tt_hide">&nbsp;</span>\n      <div class="arrow"></div>\n      <div class="address_layout_content${t}">\n        $[[options.contentLayout]]\n      </div>\n    </div>\n    `,a=window.ymaps.templateLayoutFactory.createClass(o,{build:function(){this.constructor.superclass.build.call(this),this.element=geByClass1("address_layout",this.getParentElement()),this.applyElementOffset(),this.arrowElement=geByClass1("arrow",this.element);var e=geByClass1("feature_intro_tt_hide",this.element);addEvent(e,"click",this.onCloseClick.bind(this))},applyElementOffset:function(){var e=-(this.element.offsetWidth/2-10),t=-this.element.offsetHeight-24;Object(s.setStyle)(this.element,{top:t,left:e})},clear:function(){this.constructor.superclass.clear.call(this)},onSublayoutSizeChange:function(){if(a.superclass.onSublayoutSizeChange.apply(this,arguments),!this.element)return!1;this.events.fire("shapechange")},onCloseClick:function(e){return this.events.fire("userclose"),!1},getShape:function(){var e=null;return this.element&&(e=new window.ymaps.shape.Rectangle(e=new window.ymaps.geometry.pixel.Rectangle([[0,0],[-this.element.offsetWidth,-this.element.offsetHeight]]))),e}});return a}function _(e){var t=i("global_more_details"),o="";return o=e?`\n      {% for geoObject in properties.geoObjects %}\n        <div class="address_row">\n          <div class="address_layout_content_row address_layout_content_name">$[geoObject.properties.name]</div>\n          <div class="address_layout_content_row address_layout_content_address">\n            $[geoObject.properties.address_balloon]\n          </div>\n          <div class="address_layout_content_row address_layout_content_time">$[geoObject.properties.timeStatus]</div>\n          <a class="address_layout_content_more$[geoObject.properties.moreClass]" onclick="Addresses.showMoreBalloon($[geoObject.properties.address_id])">${t}</a>\n        </div>\n      {% endfor %}\n      `:`\n    <div class="address_layout_content_row address_layout_content_name">$[properties.name]</div>\n    <div class="address_layout_content_row address_layout_content_address">\n    $[properties.address_balloon]\n    </div>\n    <div class="address_layout_content_row address_layout_content_time">$[properties.timeStatus]</div>\n    <a class="address_layout_content_more$[properties.moreClass]" onclick="Addresses.showMoreBalloon($[properties.address_id])">${t}</a>\n    `,window.ymaps.templateLayoutFactory.createClass(o)}function v(e){return e||(e=24),{type:"Circle",coordinates:[e/2,e/2],radius:e}}function y(e){return e||(e=24),[-e/4,-e]}function h(e,t){var o;if(e.icon){if(o={iconLayout:g(e.icon),iconShape:v(),iconOffset:y()},!p||!p.no_balloon){var s=f(),n=_();Object.assign(o,{balloonLayout:s,balloonContentLayout:n,hideIconOnBalloonOpen:!1,balloonAutoPan:!0})}}else{o={iconLayout:"default#image",iconImageHref:Object(a.isRetina)()>1?"/images/map/marker_2x.png":"/images/map/marker.png",iconImageOffset:[-8,-23],iconImageSize:[26,23]}}return new window.ymaps.Placemark([e.latitude,e.longitude],{address_id:e.id,name:e.title,address:e.address,metro_class:e.metro_class,metro:e.metro,timeStatus:e.time_status_html,address_balloon:e.address_balloon,moreClass:e.moreClass},o)}function w(){e.addSmallControls();var t=[];for(var o in cur.addresses)cur.addresses[o]&&(t[o]=h(cur.addresses[o]));var s={clusterDisableClickZoom:!1,groupByCoordinates:!1,clusterBalloonContentLayout:_(1),clusterBalloonLayout:f(1)};if((c=new window.ymaps.Clusterer(s)).createCluster=function(e,t){var o,s=window.ymaps.Clusterer.prototype.createCluster.call(this,e,t),a=t.length,n=24;a<10?n=24:a<100?n=26:a<1e3?n=34:a<1e4?(n=28,a=Math.floor(a/1e3)+"K"):a<1e5?(a=Math.floor(a/1e3)+"K",n=34):(n=34,a="99K"),o=" cluster_"+n,s.properties.set({countClass:o,count:a});var r=(u||(u=window.ymaps.templateLayoutFactory.createClass('<div class="circle_cluster_layout$[properties.countClass]"><span class="counter">$[properties.count]</span></div>')),u);return s.options.set("iconLayout",r),s.options.set("hasBalloon",!1),s.options.set("iconShape",v(n)),s.options.set("iconOffset",y(n)),s},c.add(t),e.getMap().geoObjects.add(c),"yandex2"===cur.mapProvider){var a=e.getMap().geoObjects.getBounds();if(n){var r=new window.vkMaps.LatLonPoint(n.latitude,n.longitude);e.setCenter(r),e.getMap().setZoom(m)}else e.getMap().setBounds(a,{checkZoomRange:!0}).then(function(){var t=e.getMap().getZoom();if(t>17)e.getMap().setZoom(17);else if(t<10){var o=new window.vkMaps.LatLonPoint(d.latitude,d.longitude);e.setCenter(o),e.getMap().setZoom(14)}})}}function b(){var e,s,a,n,r;if((e=t).getMap().behaviors.disable("drag"),e.getMap().behaviors.disable("dblClickZoom"),e.getMap().behaviors.disable("rightMouseButtonMagnifier"),e.getMap().behaviors.disable("scrollZoom"),o){a=t,n=g((s=o).icon),r=new window.ymaps.Placemark([s.latitude,s.longitude],{},{iconLayout:n,iconShape:v(),iconOffset:y()}),a.getMap().geoObjects.add(r);var i=t.getMap().geoObjects.getBounds();t.getMap().setBounds(i,{checkZoomRange:!0}).then(function(){t.getMap().getZoom()>17?t.getMap().setZoom(17):t.getMap().getZoom()<10&&t.getMap().setZoom(10)})}}function M(e){(e=ge(e))&&(addClass(e,"highlighted"),setTimeout(function(){removeClass(e,"highlighted")},1500))}return{getMap:function(){return e.getMap()},showMoreBalloon:function(e){var t=ge("address"+e),o=geByClass1("address_time_more_lnk",t);if(o){var s=geByClass1("address_time_more_lnk",domPN(domPN(o)));if(isVisible(s)){var a=geByClass1("address_more",domPN(domPN(o)));isVisible(a)||(r(o,i("global_min")),show(a))}var n=getXY(t,!0)[1];n<0||n>lastWindowHeight-200?animate(wkLayerWrap,{scrollTop:wkLayerWrap.scrollTop+n-50},300,M.pbind(t)):M(t)}},showMore:function(e){var t=geByClass1("address_more",domPN(domPN(e)));isVisible(t)?(r(e,i("global_more_details")),hide(t)):(r(e,i("global_min")),show(t))},initBox:function(t,o,s){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(!s&&geByClass("group_info_row map"))return setTimeout(function(){l.initBox(t,o,1,a)},window.browser.msie?5e3:1e3),!1;p=a,n=o,d=t;var r=cur.mapProvider,c=cur.mapProviders,u="addresses_map_";a.base_map_container_id&&(u=a.base_map_container_id);var m=u+r;for(var g in c)if(c[g]){var f=c[g];g!=r&&isArray(f)&&isVisible(u+f)&&hide(u+f),isVisible(u+r)||show(m)}var _={provider:r,lngcode:i("wall_google_maps_lang")};(e=new window.vkMaps.VKMap(m,_)).isLoaded(r)?w():e.load.addHandler(w,this),window.wkcur.onHide=function(){e.removeMap()}},initInfo:function(e){o=e;var s={provider:"yandex2",lngcode:i("wall_google_maps_lang")};(t=new window.vkMaps.VKMap("group_info_map_yandex2",s)).isLoaded("yandex2")?b():t.load.addHandler(b,this)}}}();window.Addresses=l;try{stManager.done(jsc("web/addresses.js"))}catch(e){}}});